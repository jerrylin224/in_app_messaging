c
@q.is_a?(Array)
@q[0]
@q[1]
@q
c
@conversations.last.id
@conversations.last
conversation.last
conversation
c
@conversations.last.participants.last.name
@conversations.last.participants.last
@conversations.last.participants
@conversations.last.participanys
@conversations.last
@conversations
c
@conversations.inbox(current_user).participant(current_user).merge(Mailboxer::Receipt.is_read)
Mailboxer::Conversation.ransack(params[:q]).result(distinct: true).inbox(current_user)@conversations.inbox(current_user).participant(current_user).merge(Mailboxer::Receipt.is_read)
Mailboxer::Conversation.ransack(params[:q]).result(distinct: true).inbox(current_user)
c
Mailboxer::Conversation.ransack(params[:q]).result(distinct: true).inbox(current_user)c
Mailboxer::Conversation.ransack(params[:q]).result(distinct: true).inbox(current_user).count
Mailboxer::Conversation.ransack(params[:q]).result(distinct: true).inbox(current_user)
Mailboxer::Conversation.ransack(params[:q]).result(distinct: true).inbox
Mailboxer::Conversation.ransack(params[:q]).result(distinct: true).count
Mailboxer::Conversation.ransack(params[:q]).result(distinct: true)
Mailboxer::Conversation.ransack(params[:q])
.ransack(params[:q])
Mailboxer::Conversation.ransack(params[:q])
current_user.mailbox.ransack(params[:q])
current_user.mailbox
current_user
User.ransack(params[:q])
User
c
conversation.participants.last.name
conversation.participants.last
conversation.participants
participant.name
participant
c
params[:receipients]
c
User.where(id: ["2","3"]).count
User.where(id: ["2","3"])
User.where(id: ["2","3")
User
User.all.pluck(:id)
params[:receipients]
params
c
recipients
n
params['recipients']
params[:receipients]
params
c
params[:recipients]
params
c
message.sender.name
message.sender
current_user.name
c
message.sender.name
message.sender
message
c
n
message
current_user
@conversation.receipts_for
@conversation
message
c
current_admin_user
c
current_user
c
C
c
params[:to]
params
c
params
c
current_user.mailbox.inbox.participant(current_user).merge(Mailboxer::Receipt.is_read).count
current_user.mailbox.inbox.read(current_user).count
reload
current_user.mailbox.inbox.read(current_user).count
current_user.mailbox.inbox.participant(current_user).merge(Mailboxer::Receipt.is_read).count
current_user.mailbox.inbox.participant(current_user).merge(Mailboxer::Receipt.is_unread).count
current_user.mailbox.inbox.unread(current_user).count
current_user.mailbox.inbox.participant(current_user).merge(Mailboxer::Receipt.is_read).count
current_user.mailbox.inbox(read:true).count
current_user.mailbox.inbox.read(current_user).count
current_user.mailbox.inbox.unread(current_user).count
current_user.mailbox.inbox.count
current_user.mailbox.inbox.unread(current_user).count
current_user.mailbox.inbox.unread.count
current_user.mailbox.inbox.participant(current_user).merge(Mailboxer::Receipt.is_unread).count
current_user.mailbox.inbox.participant(current_user).merge(Mailboxer::Receipt.is_read)
current_user.mailbox.inbox.participant(current_user).merge(Mailboxer::Recepipt.is_read).count
current_user.mailbox.receipts.each {|r| puts r.conversation.id´};1cc
current_user.mailbox.receipts.each {|r| puts r.conversation.id´};1
current_user.mailbox.receipts.each {conversation.id
current_user.mailbox.receipts.pluck :conversation_id
current_user.mailbox.receipts.is_read.count
current_user.mailbox.receipts.is_unread.count
current_user.mailbox.receipts.count
current_user.mailbox.inbox.each {|i| puts i.inspect};1
current_user.mailbox.inbox.unread.count
current_user.mailbox.conversations(mailbox_type: 'inbox', read: false).count
current_user.mailbox.conversations(mailbox_type: 'inbox', unread: false).count
current_user.mailbox.conversations(mailbox_type: 'inbox', unread: true).count
current_user.mailbox.conversations(mailbox_type: 'inbox', read: true).count
current_user.mailbox.conversations(mailbox_type: 'inbox').count
current_user.mailbox.conversations.count
current_user.mailbox.inbox.count
current_user.mailbox.unread.count
current_user.mailbox.is_unread?(current_user) 
current_user.mailbox
current_user.mailbox.is_read
current_user.mailbox.is_unread
current_user.mailbox.unread
current_user.mailbox.inbox(is_read: false).count
current_user.mailbox.inbox(is_read: true).count
current_user.mailbox.inbox(read: true).to_sql
current_user.mailbox.inbox(read: false).to_sql
current_user.mailbox.inbox.first(5).each {|i| puts i.inspect};1
current_user.mailbox.inbox.first(5).each {|i| puts i};1
current_user.mailbox.inbox.each {}
current_user.mailbox.is_read.count
unread - read
read-unread
unread=current_user.mailbox.inbox(read: false).pluck(:id)
read.sort == inbox.sort
read=current_user.mailbox.inbox(read: true).pluck(:id)
inbox
inbox=current_user.mailbox.inbox.pluck(:id)
inbox-current_user.mailbox.inbox.pluck(:id)
current_user.mailbox.inbox.pluck(:id)
current_user.mailbox.inbox(read: true).count
current_user.mailbox.inbox(read: false).count
current_user.mailbox.inbox(read: false)
current_user.mailbox.inbox
current_user.mailbox.inbox(read: false)
current_user.mailbox.inbox
current_user.mailbox
current_user
@chosen_recipient
 User.find_by(id: params[:to].to_i) if params[:to]
c
params
c
cc
c
current_user.mailbox
current_admin_user.mailbox
@mailbox
c
current_admin_user.mailbox
c
current_admin_user
current_user
c
@conversation.subject
@conversation
c
@conversation
c
@conversation.receipts_for(current_user)
@conversation.receipts_for(current_user).count
@conversation.receipt_for(current_user).count
@conversation.receipts_for(current_user).count
@conversation.receipts_for(current_user)
c
@conversation.receipts.first
@conversation.receipts.last.first
@conversation.receipts.last
@conversation.receipts.count
@conversation.receipts
@conversation.receipt
@conversation.receipts
@conversation
c
params[:message][:subject]
c
params[:message][:subject]
params[:message]
params[:messages]
params
c
n
m
n
conversation
n
c
params[:message][:subject]
params[:message][:body]
conversation
n
recipients
n
c
conversation
n
params[:message][:subject]
params[:message][:body]
n
 User.where(id: @conversation.receipts.last.receiver_id)
c
n
params[:message][:body]
params[:message][:subject]
params[:message][:subject]).conversation
n
User.where(id: params['recipients'])
c
@conversation.receipts.pluck(:receiver_id)
@conversation.receipts.pluck(:id)
@conversation.receipts.count
@conversation.receipts
@conversation.recepits
@conversation.recepients
@conversation.receipients
@conversation
@conversations
recepient
c
@conversation
@conversation.receipts
@conversation.receipts.where(is_read: true)
@conversation.receipts
@conversation.receipts.pluck(:receiver_id)
@conversation.receipts
@conversation.user
@conversation.mailbox
@conversation
receipts
receipts.count
receipts.first
receipts = conversation.receipts_for current_user
receipts = conversation.recipts_for current_user
conversation = current_user.mailbox.inbox.first
current_user.mailbox.inbox.first
current_user.mailbox.conversations.last.receipts.map { |r| r.receiver.name }
current_user = User.last
User.last
current_user.name
current_user
current_user.messages.where(is_read: false)
current_user.messages.where(is_read: false).inbox
